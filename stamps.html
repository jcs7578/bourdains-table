<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Passport Stamps â€” Eat Like Anthony</title>
  <meta name="description" content="Every country Anthony Bourdain visited, displayed as passport stamps.">

  <!-- App CSS -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <!-- ============ NAV ============ -->
  <nav class="site-nav">
    <a href="index.html" class="nav-link">Map</a>
    <a href="stamps.html" class="nav-link active">Passport</a>
    <a href="about.html" class="nav-link">About</a>
  </nav>

  <!-- ============ HEADER ============ -->
  <header class="site-header">
    <h1 class="site-title">Passport Stamps</h1>
    <p class="site-subtitle">"Walk in someone else's shoes â€” or at least eat their food."</p>
    <div class="stamps-stats">
      <span class="stat-item" id="stat-countries"></span>
      <span class="stat-divider">/</span>
      <span class="stat-item" id="stat-restaurants"></span>
      <span class="stat-divider">/</span>
      <span class="stat-item" id="stat-shows"></span>
    </div>
  </header>

  <!-- ============ MAIN ============ -->
  <main class="stamps-content">
    <div class="passport-book">
      <div class="passport-page-header">
        <span class="passport-page-label">VISAS &amp; ENTRY STAMPS</span>
        <span class="passport-page-label">VISAS ET CACHETS D'ENTR&Eacute;E</span>
      </div>
      <div id="stamps-grid" class="stamps-grid">
        <!-- Rendered by JS -->
      </div>
    </div>
  </main>

  <!-- ============ FOOTER ============ -->
  <footer class="site-footer">
    <p class="footer-quote">"Without experimentation, a willingness to ask questions and try new things, we shall surely become static, repetitive, and moribund."</p>
    <p>Built with Leaflet.js &middot; No frameworks, no fuss.</p>
  </footer>

  <!-- Data (needed for stamp generation) -->
  <script src="js/data.js"></script>
  <script>
    (function () {
      'use strict';

      // Country stamp ink colors â€” muted/faded to look like real passport ink
      // Real passport stamps use reds, blues, greens, purples, blacks
      var COUNTRY_STAMPS = {
        "Argentina":           { ink: '#4a7a9e', icon: 'ğŸ‡¦ğŸ‡·' },
        "Australia":           { ink: '#1a3a6b', icon: 'ğŸ‡¦ğŸ‡º' },
        "Brazil":              { ink: '#2a7a3b', icon: 'ğŸ‡§ğŸ‡·' },
        "Cambodia":            { ink: '#6b2d4a', icon: 'ğŸ‡°ğŸ‡­' },
        "Canada":              { ink: '#8b2a2a', icon: 'ğŸ‡¨ğŸ‡¦' },
        "China":               { ink: '#a0342a', icon: 'ğŸ‡¨ğŸ‡³' },
        "Colombia":            { ink: '#8a6b1a', icon: 'ğŸ‡¨ğŸ‡´' },
        "Cuba":                { ink: '#2a4a7b', icon: 'ğŸ‡¨ğŸ‡º' },
        "Denmark":             { ink: '#943040', icon: 'ğŸ‡©ğŸ‡°' },
        "Ethiopia":            { ink: '#2a6b3a', icon: 'ğŸ‡ªğŸ‡¹' },
        "France":              { ink: '#1a2a6b', icon: 'ğŸ‡«ğŸ‡·' },
        "Georgia":             { ink: '#8b3a3a', icon: 'ğŸ‡¬ğŸ‡ª' },
        "Greece":              { ink: '#2a4a8b', icon: 'ğŸ‡¬ğŸ‡·' },
        "Hong Kong":           { ink: '#a0342a', icon: 'ğŸ‡­ğŸ‡°' },
        "India":               { ink: '#b06a1a', icon: 'ğŸ‡®ğŸ‡³' },
        "Indonesia":           { ink: '#8b2a2a', icon: 'ğŸ‡®ğŸ‡©' },
        "Iran":                { ink: '#2a6b4a', icon: 'ğŸ‡®ğŸ‡·' },
        "Israel":              { ink: '#1a3a7b', icon: 'ğŸ‡®ğŸ‡±' },
        "Italy":               { ink: '#2a6b3a', icon: 'ğŸ‡®ğŸ‡¹' },
        "Jamaica":             { ink: '#3a6b2a', icon: 'ğŸ‡¯ğŸ‡²' },
        "Japan":               { ink: '#a03030', icon: 'ğŸ‡¯ğŸ‡µ' },
        "Kenya":               { ink: '#3a5a2a', icon: 'ğŸ‡°ğŸ‡ª' },
        "Laos":                { ink: '#2a3a6b', icon: 'ğŸ‡±ğŸ‡¦' },
        "Lebanon":             { ink: '#8b3040', icon: 'ğŸ‡±ğŸ‡§' },
        "Madagascar":          { ink: '#2a5a3a', icon: 'ğŸ‡²ğŸ‡¬' },
        "Malaysia":            { ink: '#1a2a5b', icon: 'ğŸ‡²ğŸ‡¾' },
        "Mexico":              { ink: '#3a5a3a', icon: 'ğŸ‡²ğŸ‡½' },
        "Morocco":             { ink: '#8b3030', icon: 'ğŸ‡²ğŸ‡¦' },
        "Myanmar":             { ink: '#8a7a1a', icon: 'ğŸ‡²ğŸ‡²' },
        "Nigeria":             { ink: '#2a6b3a', icon: 'ğŸ‡³ğŸ‡¬' },
        "Peru":                { ink: '#943030', icon: 'ğŸ‡µğŸ‡ª' },
        "Philippines":         { ink: '#2a4a8b', icon: 'ğŸ‡µğŸ‡­' },
        "Portugal":            { ink: '#2a5a2a', icon: 'ğŸ‡µğŸ‡¹' },
        "Puerto Rico":         { ink: '#3a3a6b', icon: 'ğŸ‡µğŸ‡·' },
        "Senegal":             { ink: '#2a6b3a', icon: 'ğŸ‡¸ğŸ‡³' },
        "Singapore":           { ink: '#8b3040', icon: 'ğŸ‡¸ğŸ‡¬' },
        "South Korea":         { ink: '#1a3a6b', icon: 'ğŸ‡°ğŸ‡·' },
        "Spain":               { ink: '#8b2a1a', icon: 'ğŸ‡ªğŸ‡¸' },
        "Tanzania":            { ink: '#2a6b4a', icon: 'ğŸ‡¹ğŸ‡¿' },
        "Thailand":            { ink: '#6b2a3a', icon: 'ğŸ‡¹ğŸ‡­' },
        "Trinidad and Tobago": { ink: '#8b3030', icon: 'ğŸ‡¹ğŸ‡¹' },
        "Turkey":              { ink: '#a03020', icon: 'ğŸ‡¹ğŸ‡·' },
        "Uganda":              { ink: '#3a3a2a', icon: 'ğŸ‡ºğŸ‡¬' },
        "United Kingdom":      { ink: '#1a2a5b', icon: 'ğŸ‡¬ğŸ‡§' },
        "United States":       { ink: '#2a3a6b', icon: 'ğŸ‡ºğŸ‡¸' },
        "Uruguay":             { ink: '#1a2a7b', icon: 'ğŸ‡ºğŸ‡¾' },
        "Vietnam":             { ink: '#943020', icon: 'ğŸ‡»ğŸ‡³' },
      };

      // Fallback
      var DEFAULT_STAMP = { ink: '#5a4d3e', icon: '' };

      // Gather country data from restaurants
      var countryData = {};
      RESTAURANTS.forEach(function (r) {
        var c = r.country;
        if (!countryData[c]) {
          countryData[c] = { shows: new Set(), count: 0, cities: new Set() };
        }
        countryData[c].count++;
        countryData[c].shows.add(r.show);
        countryData[c].cities.add(r.city);
      });

      // Sort countries by restaurant count (descending)
      var countries = Object.keys(countryData).sort(function (a, b) {
        return countryData[b].count - countryData[a].count;
      });

      // Random rotation between -5 and 5 degrees
      function randRotation() {
        return (Math.random() * 10 - 5).toFixed(1);
      }

      // Stamp shapes cycle
      var shapes = ['stamp-circle', 'stamp-rect', 'stamp-rounded'];

      // Render stamps
      var grid = document.getElementById('stamps-grid');
      var html = '';

      // Random opacity variation (0.55 - 0.85) for worn ink effect
      function randOpacity() {
        return (0.55 + Math.random() * 0.3).toFixed(2);
      }

      countries.forEach(function (country, idx) {
        var data = countryData[country];
        var stamp = COUNTRY_STAMPS[country] || DEFAULT_STAMP;
        var shape = shapes[idx % shapes.length];
        var rotation = randRotation();
        var opacity = randOpacity();
        var cities = Array.from(data.cities).slice(0, 3).join(' \u2022 ');
        var showList = Array.from(data.shows).map(function (s) {
          return SHOW_MAP[s] ? SHOW_MAP[s].abbr : s;
        }).join(' / ');

        html += '<div class="passport-stamp ' + shape + '" style="';
        html += 'transform: rotate(' + rotation + 'deg);';
        html += '--stamp-ink: ' + stamp.ink + ';';
        html += 'opacity: ' + opacity + ';';
        html += '">';
        html += '<div class="stamp-icon">' + stamp.icon + '</div>';
        html += '<div class="stamp-country">' + country.toUpperCase() + '</div>';
        html += '<div class="stamp-count">' + data.count + ' spot' + (data.count > 1 ? 's' : '') + '</div>';
        html += '<div class="stamp-cities">' + cities + '</div>';
        html += '<div class="stamp-shows">' + showList + '</div>';
        html += '</div>';
      });

      grid.innerHTML = html;

      // Stats
      document.getElementById('stat-countries').textContent = countries.length + ' Countries';
      document.getElementById('stat-restaurants').textContent = RESTAURANTS.length + ' Restaurants';
      document.getElementById('stat-shows').textContent = '4 Shows';
    })();
  </script>

</body>
</html>
